
<Project>















	

	<PropertyGroup>
		<CommonFilesDirectory>$([System.IO.Path]::GetFullPath( '$(MSBuildProjectDirectory)\..\..\MikeNakis.CommonFiles' ))</CommonFilesDirectory>
	</PropertyGroup>

	<Target Name="CopyCommonFiles" BeforeTargets="BeforeBuild" Condition="Exists($(CommonFilesDirectory))">
		<Message Importance="High" Text="++++++++++++++++++++ $(MSBuildProjectFile) Copying common files from directory: $(CommonFilesDirectory)" />
		<!-- See https://stackoverflow.com/a/79309367/773113 -->
		<ItemGroup>
			<FilesToCopy Include="$(CommonFilesDirectory)\.editorconfig" />
			<FilesToCopy Include="$(CommonFilesDirectory)\*.globalconfig" />
		</ItemGroup>
		<Copy SourceFiles="@(FilesToCopy)" DestinationFolder="$(MSBuildProjectDirectory)" SkipUnchangedFiles="True"
			OverwriteReadOnlyFiles="True" UseSymboliclinksIfPossible="True" />
	</Target>

	<Target Name="ImportCommonFiles" BeforeTargets="BeforeBuild" Condition="!Exists($(CommonFilesDirectory))">
		<Message Importance="High" Text="++++++++++++++++++++ $(MSBuildProjectFile) Importing common files from MikeNakis.CommonFiles" />
	</Target>

</Project>
